        <!-- Settings Modal - Redesigned -->
        <div id="settings-modal" class="modal-overlay settings-modal-overlay">
            <div class="modal-content glass-modal settings-modal-content">
                <!-- Sidebar Navigation -->
                <nav class="settings-sidebar">
                    <div class="settings-sidebar-header">
                        <div class="settings-logo">
                            <i class="fas fa-sliders-h"></i>
                        </div>
                        <h2 data-i18n="ui.dashboard.settings.title">Settings</h2>
                    </div>

                    <div class="settings-search-wrapper">
                        <i class="fas fa-search"></i>
                        <input type="text" id="settings-search" placeholder="Search settings..." autocomplete="off"
                            data-i18n-placeholder="ui.dashboard.settings.searchPlaceholder">
                        <button type="button" id="settings-search-clear" class="settings-search-clear hidden">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>

                    <ul class="settings-nav">
                        <li class="settings-nav-item active" data-category="playback">
                            <i class="fas fa-play-circle"></i>
                            <span data-i18n="ui.dashboard.settings.playback.title">Playback</span>
                            <span class="nav-indicator"></span>
                        </li>
                        <li class="settings-nav-item" data-category="download">
                            <i class="fas fa-download"></i>
                            <span data-i18n="ui.dashboard.settings.download.title">Download</span>
                            <span class="nav-indicator"></span>
                        </li>
                        <li class="settings-nav-item" data-category="audio">
                            <i class="fas fa-volume-high"></i>
                            <span data-i18n="ui.dashboard.settings.audio.title">Audio</span>
                            <span class="nav-indicator"></span>
                        </li>
                        <li class="settings-nav-item" data-category="groups">
                            <i class="fas fa-users"></i>
                            <span data-i18n="ui.dashboard.settings.groups.title">Groups</span>
                            <span class="nav-indicator"></span>
                        </li>
                        <li class="settings-nav-item" data-category="performance">
                            <i class="fas fa-bolt"></i>
                            <span data-i18n="ui.dashboard.settings.performance.title">Performance</span>
                            <span class="nav-indicator"></span>
                        </li>
                        <li class="settings-nav-item" data-category="rateLimit">
                            <i class="fas fa-shield-alt"></i>
                            <span data-i18n="ui.dashboard.settings.rateLimit.title">Rate Limiting</span>
                            <span class="nav-indicator"></span>
                        </li>
                        <li class="settings-nav-item" data-category="notifications">
                            <i class="fas fa-bell"></i>
                            <span data-i18n="ui.dashboard.settings.notifications.title">Notifications</span>
                            <span class="nav-indicator"></span>
                        </li>
                        <li class="settings-nav-item" data-category="countdown">
                            <i class="fas fa-hourglass-half"></i>
                            <span>Countdown</span>
                            <span class="nav-indicator"></span>
                        </li>
                        <li class="settings-nav-item" data-category="system">
                            <i class="fas fa-server"></i>
                            <span data-i18n="ui.dashboard.settings.system.title">System</span>
                            <span class="nav-indicator"></span>
                        </li>
                    </ul>
                </nav>

                <!-- Main Content Area -->
                <div class="settings-main">
                    <div class="settings-main-header">
                        <div class="settings-main-header-content">
                            <div class="panel-icon" id="settings-main-header-icon">
                                <i class="fas fa-play-circle"></i>
                            </div>
                            <div class="panel-title" id="settings-main-header-title">
                                <h3 data-i18n="ui.dashboard.settings.playback.title">Playback</h3>
                                <p data-i18n="ui.dashboard.settings.playback.description">Control playback behavior
                                    and transitions</p>
                            </div>
                        </div>
                        <button id="settings-modal-close" class="modal-close-btn">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>

                    <div class="settings-content" id="settings-content">
                        <!-- Playback Settings Panel -->
                        <div class="settings-panel active" data-panel="playback">
                            <div class="panel-header">
                                <div class="panel-icon playback">
                                    <i class="fas fa-play-circle"></i>
                                </div>
                                <div class="panel-title">
                                    <h3 data-i18n="ui.dashboard.settings.playback.title">Playback</h3>
                                    <p data-i18n="ui.dashboard.settings.playback.description">Control playback behavior
                                        and transitions</p>
                                </div>
                            </div>

                            <div class="settings-group">
                                <div class="setting-row" data-searchable="cleanup after play delete remove files">
                                    <div class="setting-info">
                                        <label for="setting-cleanupAfterPlay"
                                            data-i18n="ui.dashboard.settings.playback.cleanupAfterPlay">Cleanup After
                                            Play</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.playback.cleanupAfterPlayDesc">
                                            Automatically delete audio files after playback completes</p>
                                    </div>
                                    <div class="setting-control">
                                        <label class="toggle-switch-v2">
                                            <input type="checkbox" id="setting-cleanupAfterPlay"
                                                data-category="playback" data-key="cleanupAfterPlay">
                                            <span class="toggle-track">
                                                <span class="toggle-thumb"></span>
                                            </span>
                                        </label>
                                    </div>
                                </div>

                                <div class="setting-row" data-searchable="confirm skip dialog prompt">
                                    <div class="setting-info">
                                        <label for="setting-confirmSkip"
                                            data-i18n="ui.dashboard.settings.playback.confirmSkip">Confirm Skip</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.playback.confirmSkipDesc">Show confirmation
                                            dialog before skipping songs</p>
                                    </div>
                                    <div class="setting-control">
                                        <label class="toggle-switch-v2">
                                            <input type="checkbox" id="setting-confirmSkip" data-category="playback"
                                                data-key="confirmSkip">
                                            <span class="toggle-track">
                                                <span class="toggle-thumb"></span>
                                            </span>
                                        </label>
                                    </div>
                                </div>

                                <div class="setting-row"
                                    data-searchable="show requester name display current song who requested">
                                    <div class="setting-info">
                                        <label for="setting-showRequesterName"
                                            data-i18n="ui.dashboard.settings.playback.showRequesterName">Show Requester
                                            Name</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.playback.showRequesterNameDesc">Display the
                                            requester's name on the currently playing song</p>
                                    </div>
                                    <div class="setting-control">
                                        <label class="toggle-switch-v2">
                                            <input type="checkbox" id="setting-showRequesterName"
                                                data-category="playback" data-key="showRequesterName">
                                            <span class="toggle-track">
                                                <span class="toggle-thumb"></span>
                                            </span>
                                        </label>
                                    </div>
                                </div>

                                <div class="setting-row"
                                    data-searchable="shuffle random mode vip priority probability">
                                    <div class="setting-info">
                                        <label for="setting-shuffleEnabled"
                                            data-i18n="ui.dashboard.settings.playback.shuffleEnabled">Shuffle Mode</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.playback.shuffleEnabledDesc">Randomly select songs from queue. VIP songs have 3x higher probability.</p>
                                    </div>
                                    <div class="setting-control">
                                        <label class="toggle-switch-v2">
                                            <input type="checkbox" id="setting-shuffleEnabled"
                                                data-category="playback" data-key="shuffleEnabled">
                                            <span class="toggle-track">
                                                <span class="toggle-thumb"></span>
                                            </span>
                                        </label>
                                    </div>
                                </div>

                                <div class="setting-row"
                                    data-searchable="repeat mode one all queue">
                                    <div class="setting-info">
                                        <label for="setting-repeatMode"
                                            data-i18n="ui.dashboard.settings.playback.repeatMode">Repeat Mode</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.playback.repeatModeDesc">Control how songs repeat when finished.</p>
                                    </div>
                                    <div class="setting-control">
                                        <div class="select-wrapper">
                                            <select id="setting-repeatMode" data-category="playback" data-key="repeatMode">
                                                <option value="off" data-i18n="ui.dashboard.settings.playback.repeatOff">Off</option>
                                                <option value="all" data-i18n="ui.dashboard.settings.playback.repeatAll">All</option>
                                                <option value="one" data-i18n="ui.dashboard.settings.playback.repeatOne">One</option>
                                            </select>
                                            <i class="fas fa-chevron-down"></i>
                                        </div>
                                    </div>
                                </div>

                                <div class="setting-row"
                                    data-searchable="transition delay milliseconds gap pause between songs">
                                    <div class="setting-info">
                                        <label for="setting-songTransitionDelay"
                                            data-i18n="ui.dashboard.settings.playback.songTransitionDelay">Transition
                                            Delay</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.playback.songTransitionDelayDesc">Pause
                                            between songs in milliseconds (0 - 10000)</p>
                                    </div>
                                    <div class="setting-control">
                                        <div class="number-input-wrapper">
                                            <button type="button" class="number-btn minus"><i
                                                    class="fas fa-minus"></i></button>
                                            <input type="number" id="setting-songTransitionDelay"
                                                data-category="playback" data-key="songTransitionDelay" min="0"
                                                max="10000" step="100">
                                            <span class="number-unit">ms</span>
                                            <button type="button" class="number-btn plus"><i
                                                    class="fas fa-plus"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Download Settings Panel -->
                        <div class="settings-panel" data-panel="download">
                            <div class="panel-header">
                                <div class="panel-icon download">
                                    <i class="fas fa-download"></i>
                                </div>
                                <div class="panel-title">
                                    <h3 data-i18n="ui.dashboard.settings.download.title">Download</h3>
                                    <p data-i18n="ui.dashboard.settings.download.description">Configure audio format,
                                        quality, and download behavior</p>
                                </div>
                            </div>

                            <div class="settings-group">
                                <div class="setting-row" data-searchable="audio format mp3 m4a opus flac wav">
                                    <div class="setting-info">
                                        <label for="setting-audioFormat"
                                            data-i18n="ui.dashboard.settings.download.audioFormat">Audio Format</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.download.audioFormatDesc">Output format for
                                            downloaded audio files</p>
                                    </div>
                                    <div class="setting-control">
                                        <div class="select-wrapper">
                                            <select id="setting-audioFormat" data-category="download"
                                                data-key="audioFormat">
                                                <option value="mp3">MP3</option>
                                                <option value="m4a">M4A</option>
                                                <option value="opus">Opus</option>
                                                <option value="flac">FLAC</option>
                                                <option value="wav">WAV</option>
                                            </select>
                                            <i class="fas fa-chevron-down"></i>
                                        </div>
                                    </div>
                                </div>

                                <div class="setting-row"
                                    data-searchable="audio quality bitrate 64 128 192 256 320 kbps">
                                    <div class="setting-info">
                                        <label for="setting-audioQuality"
                                            data-i18n="ui.dashboard.settings.download.audioQuality">Audio
                                            Quality</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.download.audioQualityDesc">Bitrate for
                                            audio encoding. Higher = better quality, larger files</p>
                                    </div>
                                    <div class="setting-control">
                                        <div class="quality-selector">
                                            <input type="range" id="setting-audioQuality-slider" min="0" max="4"
                                                step="1" value="2">
                                            <div class="quality-labels">
                                                <span data-value="64k">64k</span>
                                                <span data-value="128k">128k</span>
                                                <span data-value="192k">192k</span>
                                                <span data-value="256k">256k</span>
                                                <span data-value="320k">320k</span>
                                            </div>
                                        </div>
                                        <select id="setting-audioQuality" data-category="download"
                                            data-key="audioQuality" class="hidden">
                                            <option value="64k">64 kbps</option>
                                            <option value="128k">128 kbps</option>
                                            <option value="192k">192 kbps</option>
                                            <option value="256k">256 kbps</option>
                                            <option value="320k">320 kbps</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="setting-row" data-searchable="youtube client android web ios player">
                                    <div class="setting-info">
                                        <label for="setting-playerClient"
                                            data-i18n="ui.dashboard.settings.download.playerClient">YouTube
                                            Client</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.download.playerClientDesc">Client to
                                            emulate when fetching from YouTube</p>
                                    </div>
                                    <div class="setting-control">
                                        <div class="client-selector">
                                            <label class="client-option">
                                                <input type="radio" name="playerClient" value="android"
                                                    data-category="download" data-key="playerClient">
                                                <span class="client-btn">
                                                    <i class="fab fa-android"></i>
                                                    <span>Android</span>
                                                </span>
                                            </label>
                                            <label class="client-option">
                                                <input type="radio" name="playerClient" value="web"
                                                    data-category="download" data-key="playerClient">
                                                <span class="client-btn">
                                                    <i class="fas fa-globe"></i>
                                                    <span>Web</span>
                                                </span>
                                            </label>
                                            <label class="client-option">
                                                <input type="radio" name="playerClient" value="ios"
                                                    data-category="download" data-key="playerClient">
                                                <span class="client-btn">
                                                    <i class="fab fa-apple"></i>
                                                    <span>iOS</span>
                                                </span>
                                            </label>
                                        </div>
                                        <select id="setting-playerClient" data-category="download"
                                            data-key="playerClient" class="hidden">
                                            <option value="android">Android</option>
                                            <option value="web">Web</option>
                                            <option value="ios">iOS</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="setting-row" data-searchable="download thumbnails album art cover image">
                                    <div class="setting-info">
                                        <label for="setting-downloadThumbnails"
                                            data-i18n="ui.dashboard.settings.download.downloadThumbnails">Download
                                            Thumbnails</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.download.downloadThumbnailsDesc">Save album
                                            artwork alongside audio files</p>
                                    </div>
                                    <div class="setting-control">
                                        <label class="toggle-switch-v2">
                                            <input type="checkbox" id="setting-downloadThumbnails"
                                                data-category="download" data-key="downloadThumbnails">
                                            <span class="toggle-track">
                                                <span class="toggle-thumb"></span>
                                            </span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Volume Normalization Settings Panel -->
                        <div class="settings-panel" data-panel="audio">
                            <div class="panel-header">
                                <div class="panel-icon audio">
                                    <i class="fas fa-volume-high"></i>
                                </div>
                                <div class="panel-title">
                                    <h3 data-i18n="ui.dashboard.settings.audio.title">Audio Normalization</h3>
                                    <p data-i18n="ui.dashboard.settings.audio.description">Automatically adjust song
                                        volumes to consistent levels</p>
                                </div>
                            </div>

                            <div class="settings-group">
                                <div class="setting-row"
                                    data-searchable="enable volume normalization automatic adjust levels">
                                    <div class="setting-info">
                                        <label for="setting-volumeNormalizationEnabled"
                                            data-i18n="ui.dashboard.settings.audio.enabled">Enable Volume
                                            Normalization</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.audio.enabledDesc">Automatically analyze
                                            and adjust song volumes based on configured thresholds</p>
                                    </div>
                                    <div class="setting-control">
                                        <label class="toggle-switch-v2">
                                            <input type="checkbox" id="setting-volumeNormalizationEnabled"
                                                data-category="volumeNormalization" data-key="enabled">
                                            <span class="toggle-track">
                                                <span class="toggle-thumb"></span>
                                            </span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Visual Threshold Range Component -->
                            <div class="volume-normalization-range-container" id="volume-normalization-range">
                                <div class="volume-range-header">
                                    <label data-i18n="ui.dashboard.settings.audio.rangeTitle">Volume Level Range
                                        (dB)</label>
                                </div>

                                <!-- Main visualization area -->
                                <div class="volume-range-visual">
                                    <div class="volume-range-track">
                                        <!-- Colored zones -->
                                        <div class="volume-zone volume-zone-too-low" id="zone-too-low"></div>
                                        <div class="volume-zone volume-zone-ok" id="zone-ok"></div>
                                        <div class="volume-zone volume-zone-too-high" id="zone-too-high"></div>

                                        <!-- Markers - now minimal with hover tooltips -->
                                        <div class="volume-marker volume-marker-too-low draggable-marker"
                                            id="marker-too-low" data-marker-type="thresholdTooLow">
                                            <div class="marker-line"></div>
                                            <div class="marker-handle"></div>
                                            <div class="marker-tooltip">
                                                <i class="fas fa-circle" style="color: #eab308;"></i>
                                                <span class="tooltip-label"
                                                    data-i18n="ui.dashboard.settings.audio.tooLow">Too Low</span>
                                                <span class="tooltip-value" id="value-too-low">-20 dB</span>
                                            </div>
                                        </div>
                                        <div class="volume-marker volume-marker-too-high draggable-marker"
                                            id="marker-too-high" data-marker-type="thresholdTooHigh">
                                            <div class="marker-line"></div>
                                            <div class="marker-handle"></div>
                                            <div class="marker-tooltip">
                                                <i class="fas fa-circle" style="color: #ef4444;"></i>
                                                <span class="tooltip-label"
                                                    data-i18n="ui.dashboard.settings.audio.tooHigh">Too High</span>
                                                <span class="tooltip-value" id="value-too-high">-6 dB</span>
                                            </div>
                                        </div>
                                        <div class="volume-marker volume-marker-target draggable-marker"
                                            id="marker-target" data-marker-type="targetLevel">
                                            <div class="marker-line"></div>
                                            <div class="marker-handle marker-handle-target"></div>
                                            <div class="marker-tooltip">
                                                <i class="fas fa-bullseye" style="color: #3b82f6;"></i>
                                                <span class="tooltip-label"
                                                    data-i18n="ui.dashboard.settings.audio.target">Target</span>
                                                <span class="tooltip-value" id="value-target">-12 dB</span>
                                            </div>
                                        </div>
                                        <div class="volume-marker volume-marker-current" id="marker-current-song"
                                            style="display: none;">
                                            <div class="marker-line"></div>
                                            <div class="marker-handle marker-handle-current"></div>
                                            <div class="marker-tooltip">
                                                <i class="fas fa-music" style="color: #06b6d4;"></i>
                                                <span class="tooltip-label"
                                                    data-i18n="ui.dashboard.settings.audio.nowPlaying">Now
                                                    Playing</span>
                                                <span class="tooltip-value" id="value-current-song">-18 dB</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- dB Axis below the track -->
                                <div class="volume-range-axis" id="volume-range-axis">
                                    <!-- Decibel axis will be generated by JavaScript -->
                                </div>

                                <!-- Threshold values display row -->
                                <div class="volume-threshold-values">
                                    <div class="threshold-value-item threshold-too-low">
                                        <div class="threshold-indicator" style="background: #eab308;"></div>
                                        <div class="threshold-info">
                                            <span class="threshold-label"
                                                data-i18n="ui.dashboard.settings.audio.tooLow">Too Low</span>
                                            <span class="threshold-db" id="display-too-low">-20 dB</span>
                                        </div>
                                    </div>
                                    <div class="threshold-value-item threshold-ok">
                                        <div class="threshold-indicator" style="background: #22c55e;"></div>
                                        <div class="threshold-info">
                                            <span class="threshold-label"
                                                data-i18n="ui.dashboard.settings.audio.ok">OK</span>
                                            <span class="threshold-db" id="display-ok-range">-20 to -6 dB</span>
                                        </div>
                                    </div>
                                    <div class="threshold-value-item threshold-target">
                                        <div class="threshold-indicator" style="background: #3b82f6;"></div>
                                        <div class="threshold-info">
                                            <span class="threshold-label"
                                                data-i18n="ui.dashboard.settings.audio.target">Target</span>
                                            <span class="threshold-db" id="display-target">-12 dB</span>
                                        </div>
                                    </div>
                                    <div class="threshold-value-item threshold-too-high">
                                        <div class="threshold-indicator" style="background: #ef4444;"></div>
                                        <div class="threshold-info">
                                            <span class="threshold-label"
                                                data-i18n="ui.dashboard.settings.audio.tooHigh">Too High</span>
                                            <span class="threshold-db" id="display-too-high">-6 dB</span>
                                        </div>
                                    </div>
                                    <div class="threshold-value-item threshold-current" id="display-current-container"
                                        style="display: none;">
                                        <div class="threshold-indicator threshold-indicator-pulse"
                                            style="background: #06b6d4;"></div>
                                        <div class="threshold-info">
                                            <span class="threshold-label"
                                                data-i18n="ui.dashboard.settings.audio.nowPlaying">Now Playing</span>
                                            <span class="threshold-db" id="display-current-song">-18 dB</span>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <!-- How It Works Card -->
                            <div class="settings-info-card audio">
                                <i class="fas fa-info-circle"></i>
                                <div>
                                    <strong data-i18n="ui.dashboard.settings.audio.howItWorks">How it works</strong>
                                    <p data-i18n="ui.dashboard.settings.audio.howItWorksText">When a song is downloaded,
                                        its volume level is analyzed. Songs that are too quiet or too loud are
                                        automatically adjusted to match your target level. For example, a song at -25 dB
                                        will be boosted by 13 dB to reach the -12 dB target.</p>
                                </div>
                            </div>

                            <!-- Threshold Guide Card -->
                            <div class="settings-info-card audio">
                                <i class="fas fa-book"></i>
                                <div>
                                    <strong data-i18n="ui.dashboard.settings.audio.thresholdGuide">Threshold
                                        Guide</strong>
                                    <p data-i18n="ui.dashboard.settings.audio.thresholdGuideText"><strong>Too
                                            Low:</strong> Songs quieter than this threshold will be
                                        boosted.<br><strong>OK:</strong> Songs in this range are acceptable but may be
                                        fine-tuned.<br><strong>Too High:</strong> Songs louder than this threshold will
                                        be reduced.<br><strong>Target:</strong> The desired volume level for all
                                        normalized songs.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Groups Settings Panel -->
                        <div class="settings-panel" data-panel="groups">
                            <div class="panel-header">
                                <div class="panel-icon groups">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="panel-title">
                                    <h3 data-i18n="ui.dashboard.settings.groups.title">Monitored Groups</h3>
                                    <p data-i18n="ui.dashboard.settings.groups.description">Manage WhatsApp groups the
                                        bot listens to</p>
                                </div>
                            </div>

                            <div class="settings-group">
                                <div class="setting-row">
                                    <div class="setting-info">
                                        <label data-i18n="ui.dashboard.settings.groups.addGroup">Add Group</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.groups.addGroupDesc">Manually add a group
                                            by its WhatsApp ID (ends with @g.us)</p>
                                    </div>
                                    <div class="setting-control">
                                        <form id="add-group-form" class="groups-add-form">
                                            <input type="text" id="group-id-input" placeholder="123456789@g.us" required
                                                data-i18n-placeholder="ui.dashboard.settings.groups.groupPlaceholder">
                                            <button type="submit" class="groups-add-btn">
                                                <i class="fas fa-plus"></i>
                                                <span data-i18n="ui.dashboard.settings.groups.add">Add</span>
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>

                            <div class="groups-pending-container" id="groups-pending-container" style="display: none;">
                                <div class="groups-list-header">
                                    <span data-i18n="ui.dashboard.settings.groups.pendingRequests">Pending
                                        Requests</span> (<span id="pending-count">0</span>)
                                </div>
                                <div id="groups-pending-list" class="groups-list">
                                    <!-- Pending confirmations will be loaded here -->
                                </div>
                            </div>

                            <div class="settings-info-card groups">
                                <i class="fas fa-info-circle"></i>
                                <div>
                                    <strong data-i18n="ui.dashboard.settings.groups.howToAdd">How to add groups</strong>
                                    <p data-i18n="ui.dashboard.settings.groups.howToAddText">Send <code>!ping</code> in
                                        any WhatsApp group you want to add. The request will appear here for
                                        confirmation. You can also manually add groups using the form above.</p>
                                </div>
                            </div>

                            <div class="groups-list-container">
                                <div class="groups-list-header">
                                    <span data-i18n="ui.dashboard.settings.groups.monitoredGroups">Monitored
                                        Groups</span> (<span id="groups-count">0</span>)
                                </div>
                                <div id="groups-list" class="groups-list">
                                    <div class="groups-loading">
                                        <i class="fas fa-circle-notch fa-spin"></i>
                                        <span data-i18n="ui.dashboard.settings.groups.loadingGroups">Loading
                                            groups...</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Performance Settings Panel -->
                        <div class="settings-panel" data-panel="performance">
                            <div class="panel-header">
                                <div class="panel-icon performance">
                                    <i class="fas fa-bolt"></i>
                                </div>
                                <div class="panel-title">
                                    <h3 data-i18n="ui.dashboard.settings.performance.title">Performance</h3>
                                    <p data-i18n="ui.dashboard.settings.performance.description">Optimize loading and
                                        caching behavior</p>
                                </div>
                            </div>

                            <div class="settings-group">
                                <div class="setting-row" data-searchable="prefetch enable preload cache buffer">
                                    <div class="setting-info">
                                        <label for="setting-prefetchNext"
                                            data-i18n="ui.dashboard.settings.performance.prefetchNext">Enable
                                            Prefetch</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.performance.prefetchNextDesc">Download
                                            upcoming songs before they're needed</p>
                                    </div>
                                    <div class="setting-control">
                                        <label class="toggle-switch-v2">
                                            <input type="checkbox" id="setting-prefetchNext" data-category="performance"
                                                data-key="prefetchNext">
                                            <span class="toggle-track">
                                                <span class="toggle-thumb"></span>
                                            </span>
                                        </label>
                                    </div>
                                </div>

                                <div class="setting-row" data-searchable="prefetch count number songs queue ahead">
                                    <div class="setting-info">
                                        <label for="setting-prefetchCount"
                                            data-i18n="ui.dashboard.settings.performance.prefetchCount">Prefetch
                                            Count</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.performance.prefetchCountDesc">Number of
                                            songs to preload ahead (0 = all queued songs)</p>
                                    </div>
                                    <div class="setting-control">
                                        <div class="number-input-wrapper">
                                            <button type="button" class="number-btn minus"><i
                                                    class="fas fa-minus"></i></button>
                                            <input type="number" id="setting-prefetchCount" data-category="performance"
                                                data-key="prefetchCount" min="0" max="20" step="1">
                                            <span class="number-unit">songs</span>
                                            <button type="button" class="number-btn plus"><i
                                                    class="fas fa-plus"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="settings-info-card performance">
                                <i class="fas fa-lightbulb"></i>
                                <div>
                                    <strong data-i18n="ui.dashboard.settings.performance.proTip">Pro Tip</strong>
                                    <p data-i18n="ui.dashboard.settings.performance.proTipText">Enable prefetch with
                                        count 2-3 for smooth playback without using too much storage.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Notifications Settings Panel -->
                        <div class="settings-panel" data-panel="notifications">
                            <div class="panel-header">
                                <div class="panel-icon notifications">
                                    <i class="fas fa-bell"></i>
                                </div>
                                <div class="panel-title">
                                    <h3 data-i18n="ui.dashboard.settings.notifications.title">Notifications</h3>
                                    <p data-i18n="ui.dashboard.settings.notifications.description">Configure WhatsApp
                                        notification behavior</p>
                                </div>
                            </div>

                            <div class="settings-group">
                                <div class="setting-row" data-searchable="enable notifications alerts messages">
                                    <div class="setting-info">
                                        <label for="setting-notificationsEnabled"
                                            data-i18n="ui.dashboard.settings.notifications.enabled">Enable
                                            Notifications</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.notifications.enabledDesc">Send WhatsApp
                                            messages when songs are about to play</p>
                                    </div>
                                    <div class="setting-control">
                                        <label class="toggle-switch-v2">
                                            <input type="checkbox" id="setting-notificationsEnabled"
                                                data-category="notifications" data-key="enabled">
                                            <span class="toggle-track">
                                                <span class="toggle-thumb"></span>
                                            </span>
                                        </label>
                                    </div>
                                </div>

                                <div class="setting-row" data-searchable="notify position queue spot alert when">
                                    <div class="setting-info">
                                        <label for="setting-notifyAtPosition"
                                            data-i18n="ui.dashboard.settings.notifications.notifyAtPosition">Notify at
                                            Position</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.notifications.notifyAtPositionDesc">Alert
                                            users when their song reaches this queue position (1 = next up)</p>
                                    </div>
                                    <div class="setting-control">
                                        <div class="number-input-wrapper">
                                            <button type="button" class="number-btn minus"><i
                                                    class="fas fa-minus"></i></button>
                                            <input type="number" id="setting-notifyAtPosition"
                                                data-category="notifications" data-key="notifyAtPosition" min="1"
                                                max="10" step="1">
                                            <span class="number-unit">pos</span>
                                            <button type="button" class="number-btn plus"><i
                                                    class="fas fa-plus"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="settings-info-card notifications">
                                <i class="fas fa-info-circle"></i>
                                <div>
                                    <strong data-i18n="ui.dashboard.settings.notifications.howItWorks">How it
                                        works</strong>
                                    <p data-i18n="ui.dashboard.settings.notifications.howItWorksText">When enabled, the
                                        person who requested a song gets a WhatsApp message when their song is about to
                                        play.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Rate Limiting Settings Panel -->
                        <div class="settings-panel" data-panel="rateLimit">
                            <div class="panel-header">
                                <div class="panel-icon rateLimit">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <div class="panel-title">
                                    <h3 data-i18n="ui.dashboard.settings.rateLimit.title">Rate Limiting</h3>
                                    <p data-i18n="ui.dashboard.settings.rateLimit.description">Control request limits to prevent spam and abuse</p>
                                </div>
                            </div>

                            <div class="settings-group">
                                <div class="setting-row" data-searchable="enable rate limit spam protection">
                                    <div class="setting-info">
                                        <label for="setting-rateLimitEnabled"
                                            data-i18n="ui.dashboard.settings.rateLimit.enabled">Enable Rate Limiting</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.rateLimit.enabledDesc">Limit how many song requests non-VIP users can make within a time window</p>
                                    </div>
                                    <div class="setting-control">
                                        <label class="toggle-switch-v2">
                                            <input type="checkbox" id="setting-rateLimitEnabled"
                                                data-category="rateLimit" data-key="enabled">
                                            <span class="toggle-track">
                                                <span class="toggle-thumb"></span>
                                            </span>
                                        </label>
                                    </div>
                                </div>

                                <div class="setting-row" data-searchable="max requests per window limit">
                                    <div class="setting-info">
                                        <label for="setting-rateLimitMaxRequests"
                                            data-i18n="ui.dashboard.settings.rateLimit.maxRequests">Max Requests</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.rateLimit.maxRequestsDesc">Maximum number of requests allowed per time window</p>
                                    </div>
                                    <div class="setting-control">
                                        <div class="number-input-wrapper">
                                            <button type="button" class="number-btn minus"><i
                                                    class="fas fa-minus"></i></button>
                                            <input type="number" id="setting-rateLimitMaxRequests"
                                                data-category="rateLimit" data-key="maxRequests"
                                                min="1" max="100" step="1" value="3">
                                            <span class="number-unit">req</span>
                                            <button type="button" class="number-btn plus"><i
                                                    class="fas fa-plus"></i></button>
                                        </div>
                                    </div>
                                </div>

                                <div class="setting-row" data-searchable="time window seconds minutes">
                                    <div class="setting-info">
                                        <label for="setting-rateLimitWindowSeconds"
                                            data-i18n="ui.dashboard.settings.rateLimit.windowSeconds">Time Window (seconds)</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.rateLimit.windowSecondsDesc">Time window in seconds for counting requests (minimum 10 seconds)</p>
                                    </div>
                                    <div class="setting-control">
                                        <div class="number-input-wrapper">
                                            <button type="button" class="number-btn minus"><i
                                                    class="fas fa-minus"></i></button>
                                            <input type="number" id="setting-rateLimitWindowSeconds"
                                                data-category="rateLimit" data-key="windowSeconds"
                                                min="10" max="3600" step="10" value="60">
                                            <span class="number-unit">sec</span>
                                            <button type="button" class="number-btn plus"><i
                                                    class="fas fa-plus"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="settings-info-card rateLimit">
                                <i class="fas fa-info-circle"></i>
                                <div>
                                    <strong data-i18n="ui.dashboard.settings.rateLimit.info">About Rate Limiting</strong>
                                    <p data-i18n="ui.dashboard.settings.rateLimit.infoText">Rate limiting applies only to non-VIP users. VIP users can make unlimited requests. The default is 3 requests per 60 seconds. When a user exceeds the limit, they must wait until the time window resets.</p>
                                </div>
                            </div>
                        </div>

                        <!-- System Settings Panel -->
                        <div class="settings-panel" data-panel="system">
                            <div class="panel-header">
                                <div class="panel-icon system">
                                    <i class="fas fa-server"></i>
                                </div>
                                <div class="panel-title">
                                    <h3 data-i18n="ui.dashboard.settings.system.title">System</h3>
                                    <p data-i18n="ui.dashboard.settings.system.description">Manage session state and
                                        system maintenance</p>
                                </div>
                            </div>

                            <div class="settings-group">
                                <div class="setting-row" data-searchable="demo mode privacy blur whatsapp id">
                                    <div class="setting-info">
                                        <label for="setting-demoMode"
                                            data-i18n="ui.dashboard.settings.privacy.demoMode">Demo Mode</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.privacy.demoModeDesc">Blur WhatsApp IDs and
                                            group IDs for safe screen recording and demos</p>
                                    </div>
                                    <div class="setting-control">
                                        <label class="toggle-switch-v2">
                                            <input type="checkbox" id="setting-demoMode" data-category="privacy"
                                                data-key="demoMode">
                                            <span class="toggle-track">
                                                <span class="toggle-thumb"></span>
                                            </span>
                                        </label>
                                    </div>
                                </div>

                                <div class="setting-row" data-searchable="language lang locale english portuguese">
                                    <div class="setting-info">
                                        <label for="setting-language"
                                            data-i18n="ui.dashboard.settings.system.language">Language</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.system.languageDesc">Choose your preferred
                                            language for the web interface</p>
                                    </div>
                                    <div class="setting-control">
                                        <div class="select-wrapper">
                                            <select id="setting-language" data-category="user" data-key="language">
                                                <option value="en"> English</option>
                                                <option value="pt"> Portugus</option>
                                            </select>
                                            <i class="fas fa-chevron-down"></i>
                                        </div>
                                    </div>
                                </div>

                                <div class="setting-row" data-searchable="new session reset clear queue stats">
                                    <div class="setting-info">
                                        <label data-i18n="ui.dashboard.settings.system.newSession">New Session</label>
                                        <p class="setting-description"
                                            data-i18n="ui.dashboard.settings.system.newSessionDesc">Clear the current
                                            queue, stop playback, and reset all statistics. Use this when starting a
                                            fresh event or day.</p>
                                    </div>
                                    <div class="setting-control">
                                        <button id="new-session-btn" class="cyber-btn danger small"
                                            style="width: auto;">
                                            <i class="fas fa-redo"></i> <span
                                                data-i18n="ui.dashboard.settings.system.startNewSession">Start New
                                                Session</span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="settings-info-card system">
                                <i class="fas fa-exclamation-circle"></i>
                                <div>
                                    <strong data-i18n="ui.dashboard.settings.system.warning">Warning</strong>
                                    <p data-i18n="ui.dashboard.settings.system.warningText">Starting a new session is
                                        destructive. All playback history, stats, and the current queue will be cleared
                                        immediately.</p>
                                </div>
                            </div>

                            <!-- Disk Usage Section -->
                            <div class="settings-group">
                                <div id="disk-usage-container" class="disk-usage-container">
                                    <div class="disk-usage-loading">
                                        <i class="fas fa-spinner fa-spin"></i>
                                        <span data-i18n="ui.dashboard.settings.system.loadingDiskUsage">Loading disk
                                            usage...</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Countdown Settings Panel -->
                        <div class="settings-panel" data-panel="countdown">
                            <div class="panel-header">
                                <div class="panel-icon countdown">
                                    <i class="fas fa-hourglass-half"></i>
                                </div>
                                <div class="panel-title">
                                    <h3>Event Countdown</h3>
                                    <p>Sync a song to a special moment with a countdown overlay</p>
                                </div>
                                <div class="panel-toggle">
                                    <label class="toggle-switch-v2">
                                        <input type="checkbox" id="setting-countdownEnabled"
                                            data-category="countdown" data-key="enabled">
                                        <span class="toggle-track">
                                            <span class="toggle-thumb"></span>
                                        </span>
                                    </label>
                                </div>
                            </div>

                            <div class="settings-group">
                                <!-- Target Date & Time -->
                                <div class="setting-row" data-searchable="target date time countdown">
                                    <div class="setting-info">
                                        <label>
                                            <i class="fas fa-calendar-alt" style="margin-right: 8px;"></i>
                                            Target Date & Time
                                        </label>
                                    </div>
                                    <div class="setting-control" style="display: flex; gap: 12px; align-items: center;">
                                        <input type="date" id="setting-countdownTargetDate"
                                            class="text-input"
                                            data-category="countdown" data-key="targetDate"
                                            style="flex: 1;">
                                        <input type="time" id="setting-countdownTargetTime"
                                            class="text-input"
                                            data-category="countdown" data-key="targetTime"
                                            style="flex: 1;">
                                    </div>
                                </div>

                                <!-- Countdown Song -->
                                <div class="setting-row" data-searchable="song url youtube spotify countdown music">
                                    <div class="setting-info">
                                        <label>
                                            <i class="fas fa-music" style="margin-right: 8px;"></i>
                                            Countdown Song
                                        </label>
                                    </div>
                                    <div class="setting-control" style="display: flex; gap: 8px;">
                                        <input type="text" id="setting-countdownSongUrl"
                                            class="text-input"
                                            placeholder="Select a song from library..."
                                            style="flex: 1;">
                                        <button type="button" id="btn-browse-countdown-song" class="settings-action-btn" style="white-space: nowrap;">
                                            <i class="fas fa-folder-open"></i>
                                            <span>Browse</span>
                                        </button>
                                    </div>
                                </div>

                                <!-- Song Timestamp at Zero - Waveform Selector -->
                                <div class="setting-row setting-row-waveform" data-searchable="song timestamp position seconds countdown waveform">
                                    <div class="setting-info setting-info-waveform">
                                        <label>
                                            <i class="fas fa-clock" style="margin-right: 8px;"></i>
                                            Song Timestamp at Zero
                                        </label>
                                        <p class="setting-description">Drag the marker to the moment you want to sync with the countdown</p>
                                    </div>
                                </div>

                                <!-- Waveform Container -->
                                <div class="countdown-waveform-container" id="countdown-waveform-container">
                                    <div class="waveform-header">
                                        <label>Waveform</label>
                                        <span class="timestamp-display" id="countdown-timestamp-display">0:00</span>
                                    </div>
                                    <div class="waveform-visual">
                                        <canvas id="countdown-waveform-canvas"></canvas>
                                        <div class="waveform-marker draggable-marker" id="countdown-waveform-marker">
                                            <div class="marker-line"></div>
                                            <div class="marker-handle"></div>
                                        </div>
                                        <!-- Loading state -->
                                        <div class="waveform-loading">
                                            <i class="fas fa-circle-notch fa-spin"></i>
                                            <span class="waveform-loading-text">Select a song to see waveform</span>
                                        </div>
                                        <!-- Error state -->
                                        <div class="waveform-error">
                                            <i class="fas fa-exclamation-triangle"></i>
                                            <span class="waveform-error-text">Failed to load waveform</span>
                                        </div>
                                    </div>
                                    <div class="waveform-time-axis" id="countdown-time-axis">
                                        <!-- Time labels generated by JS -->
                                    </div>
                                    <!-- Hidden input for form compatibility -->
                                    <input type="hidden" id="setting-countdownSongTimestamp" value="0:00">
                                </div>

                                <!-- Show Countdown For -->
                                <div class="setting-row" data-searchable="show threshold countdown seconds">
                                    <div class="setting-info">
                                        <label>
                                            <i class="fas fa-hourglass-start" style="margin-right: 8px;"></i>
                                            Show Countdown For
                                        </label>
                                    </div>
                                    <div class="setting-control">
                                        <select id="setting-countdownShowThreshold"
                                            class="text-input"
                                            data-category="countdown" data-key="showThreshold"
                                            style="width: 150px;">
                                            <option value="10">10 sec</option>
                                            <option value="30" selected>30 sec</option>
                                            <option value="60">60 sec</option>
                                            <option value="custom">Custom</option>
                                        </select>
                                        <input type="number" id="setting-countdownShowThresholdCustom"
                                            class="text-input"
                                            data-category="countdown" data-key="showThreshold"
                                            placeholder="Seconds"
                                            min="10" max="3600" step="10"
                                            style="width: 120px; margin-left: 8px; display: none;">
                                    </div>
                                </div>

                                <!-- Message at Zero -->
                                <div class="setting-row" data-searchable="message celebration zero countdown">
                                    <div class="setting-info">
                                        <label>
                                            <i class="fas fa-comment" style="margin-right: 8px;"></i>
                                            Message at Zero
                                        </label>
                                    </div>
                                    <div class="setting-control" style="min-width: 200px;">
                                        <input type="text" id="setting-countdownMessage"
                                            class="text-input"
                                            data-category="countdown" data-key="message"
                                            placeholder="Happy New Year! "
                                            value="Happy New Year! "
                                            style="width: 100%;">
                                    </div>
                                </div>
                            </div>

                            <!-- Countdown Status -->
                            <div class="settings-group-header">
                                <i class="fas fa-info-circle"></i>
                                <span>Status</span>
                            </div>

                            <div class="settings-group">
                                <div class="setting-row">
                                    <div class="setting-info">
                                        <label>Time Remaining</label>
                                        <p class="setting-description" id="countdown-status-text">Countdown not configured</p>
                                    </div>
                                    <div class="setting-control">
                                        <span id="countdown-time-remaining" class="countdown-status-value">--:--:--</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Search Results Panel (hidden by default) -->
                        <div class="settings-panel" data-panel="search-results" id="search-results-panel">
                            <div class="panel-header">
                                <div class="panel-icon search">
                                    <i class="fas fa-search"></i>
                                </div>
                                <div class="panel-title">
                                    <h3 data-i18n="ui.dashboard.settings.search.title">Search Results</h3>
                                    <p id="search-results-count" data-i18n="ui.dashboard.settings.search.settingsFound">
                                        0 settings found</p>
                                </div>
                            </div>
                            <div class="settings-group" id="search-results-container">
                                <!-- Search results populated here -->
                            </div>
                            <div class="no-results hidden" id="no-search-results">
                                <i class="fas fa-search"></i>
                                <p data-i18n="ui.dashboard.settings.search.noResults">No settings match your search</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Unified Footer -->
                <div class="settings-footer">
                    <div class="footer-left">
                        <button type="button" id="settings-reset-all" class="settings-reset-link"
                            title="Reset All Settings" data-i18n-title="ui.dashboard.settings.footer.resetAll">
                            <i class="fas fa-undo"></i>
                            <span data-i18n="ui.dashboard.settings.footer.resetAll">Reset All</span>
                        </button>
                        <div class="footer-note">
                            <i class="fas fa-info-circle"></i>
                            <span data-i18n="ui.dashboard.settings.footer.footerNote">Changes apply instantly. Server
                                settings require <code>.env</code> edit and restart.</span>
                        </div>
                    </div>
                    <div class="footer-right">
                        <div class="footer-save-indicator" id="settings-save-indicator">
                            <i class="fas fa-check-circle"></i>
                            <span data-i18n="ui.dashboard.settings.footer.saved">Saved</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>